--- jmeters-0.2.0/source/Makefile.old	2010-10-28 11:09:55.000000000 +0100
+++ jmeters-0.2.0/source/Makefile	2010-10-28 11:13:46.000000000 +0100
@@ -14,15 +14,16 @@
 #  along with this program; if not, write to the Free Software
 #  Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 
-
-PREFIX = /usr/local
+CXX ?= g++
+PREFIX ?= /usr/local
 SUFFIX := $(shell uname -m | sed -e 's/^unknown/$//' -e 's/^i.86/$//' -e 's/^x86_64/$/64/')
-LIBDIR = lib$(SUFFIX)
+LIBDIR ?= lib$(SUFFIX)
 SHARED = $(PREFIX)/share
 PROGRAM = jmeters
 VERSION = 0.2.0
 DISTDIR = jmeters-$(VERSION)
-CPPFLAGS += -O3 -Wall -MMD -MP -DPROGRAM=\"$(PROGRAM)\" -DVERSION=\"$(VERSION)\" -DSHARED=\"$(SHARED)\"
+#CPPFLAGS += -O3 -Wall -MMD -MP -DPROGRAM=\"$(PROGRAM)\" -DVERSION=\"$(VERSION)\" -DSHARED=\"$(SHARED)\"
+CPPFLAGS += -Wall -MMD -MP -DPROGRAM=\"$(PROGRAM)\" -DVERSION=\"$(VERSION)\" -DSHARED=\"$(SHARED)\"
 #CPPFLAGS += -march=pentium4
 
 
@@ -35,17 +36,17 @@
 jmeters:	LDLIBS += -lsndfile -lclxclient -lclthreads -ljack -lpng -lXft -lX11 -lrt
 jmeters:	LDFLAGS += -L/usr/X11R6/lib
 jmeters:	$(JMETERS_O)
-	g++ $(LDFLAGS) -o $@ $(JMETERS_O) $(LDLIBS)
+	$(CXX) $(LDFLAGS) -o $@ $(JMETERS_O) $(LDLIBS)
 
 $(JMETERS_O):
 -include $(JMETERS_O:%.o=%.d)
 
 
 install:	all
-	/usr/bin/install -d $(PREFIX)/bin
-	/usr/bin/install -m 755 jmeters $(PREFIX)/bin
-	/usr/bin/install -d $(SHARED)/jmeters
-	/usr/bin/install -m 644 ../share/* $(SHARED)/jmeters
+	/usr/bin/install -d $(DESTDIR)$(PREFIX)/bin
+	/usr/bin/install -m 755 jmeters $(DESTDIR)$(PREFIX)/bin
+	/usr/bin/install -d $(DESTDIR)$(SHARED)/jmeters
+	/usr/bin/install -m 644 ../share/* $(DESTDIR)$(SHARED)/jmeters
 
 clean:
 	/bin/rm -f *~ *.o *.a *.d *.so
